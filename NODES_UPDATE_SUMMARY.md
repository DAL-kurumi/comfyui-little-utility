# 節點更新總結

## 變更內容

所有文字處理節點已更新為**連接輸入模式**，不再使用手動文字輸入框。

---

## 更新的節點

### 1. 文字結合節點 (Text Combine Node)

**更新前**：

- text_1 到 text_10 都是可以手動輸入的文字框
- separator 在 required 區塊中

**更新後**：

- text_1（必填）：必須從其他節點連接輸入 ✅
- text_2 到 text_10（可選）：當連接時自動顯示 ✅
- separator（可選）：移到 optional 區塊最下方，可手動輸入分隔符 ✅

**使用方式**：

```
[節點A] ──> text_1
[節點B] ──> text_2  （連接後自動顯示）
[節點C] ──> text_3  （連接後自動顯示）
            ...
           separator: "\n" （手動輸入）
```

---

### 2. 文字清理節點 (Text Cleanup Node)

**更新前**：

- text 是可以手動輸入的大文字框

**更新後**：

- text（必填）：必須從其他節點連接輸入 ✅
- remove_start_end_commas（可選）：控制選項，手動設定 ✅
- normalize_spaces（可選）：控制選項，手動設定 ✅

**使用方式**：

```
[文字來源節點] ──> text
                   remove_start_end_commas: ☑ 移除
                   normalize_spaces: ☑ 標準化
```

---

### 3. 文字清理進階節點 (Text Cleanup Advanced Node)

**更新前**：

- text 是可以手動輸入的大文字框
- 所有選項都在 required 區塊

**更新後**：

- text（必填）：必須從其他節點連接輸入 ✅
- clean_commas（可選）：控制選項 ✅
- clean_spaces（可選）：控制選項 ✅
- remove_empty_lines（可選）：控制選項 ✅
- trim_lines（可選）：控制選項 ✅

**使用方式**：

```
[文字來源節點] ──> text
                   clean_commas: ☑ 清理
                   clean_spaces: ☑ 清理
                   remove_empty_lines: ☐ 保留
                   trim_lines: ☑ 修剪
```

---

## 技術細節

### forceInput 參數

使用 `{"forceInput": True}` 強制該輸入只能通過連接其他節點來提供，不會顯示手動輸入框。

```python
"text": ("STRING", {"forceInput": True})
```

### 動態顯示

- 對於 optional 輸入，只有當實際連接時才會在節點上顯示
- text_1 是 required，始終顯示
- text_2 到 text_10 是 optional，連接時自動顯示

---

## 推薦工作流程

```
┌──────────────┐
│ 原始文字節點1 │──┐
└──────────────┘  │
                  │    ┌──────────────┐    ┌──────────────┐    ┌──────────┐
┌──────────────┐  ├───>│ 文字結合節點  │───>│  文字清理節點 │───>│ 最終輸出 │
│ 原始文字節點2 │──┤    │ (Combine)    │    │  (Cleanup)   │    └──────────┘
└──────────────┘  │    └──────────────┘    └──────────────┘
                  │         separator: ", "
┌──────────────┐  │
│ 原始文字節點3 │──┘
└──────────────┘
```

### 步驟說明：

1. 多個文字源節點連接到文字結合節點
2. 設定分隔符（如 ", " 或 "\n"）
3. 合併後的文字輸出到文字清理節點
4. 自動清理錯誤的逗號和空格
5. 獲得乾淨整齊的最終文字

---

## 注意事項

⚠️ **重要**：

- 所有文字輸入現在都**必須從其他節點連接**，不能直接在節點中輸入文字
- 如果需要手動輸入文字，請使用 ComfyUI 內建的文字輸入節點或其他文字生成節點
- 控制參數（separator、clean_commas 等）仍然可以手動設定

---

## 更新時間

2025-12-23
